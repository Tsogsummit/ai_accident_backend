# ===========================================
# Environment Configuration
# ===========================================

# Энэ файлыг .env гэж хуулж, өөрийн утгууд оруулаарай

# Node Environment
NODE_ENV=development
# production, development, test

# ===========================================
# Database Configuration (PostgreSQL)
# ===========================================

DB_HOST=localhost
DB_PORT=5432
DB_NAME=accident_db
DB_USER=postgres
DB_PASSWORD=postgres
DB_MAX_CONNECTIONS=20
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=2000

# ===========================================
# Redis Configuration
# ===========================================

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ===========================================
# JWT Configuration
# ===========================================

JWT_SECRET=your-super-secret-jwt-key-please-change-this-in-production
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# ===========================================
# Google Cloud Platform
# ===========================================

GCP_PROJECT_ID=your-gcp-project-id
GCP_KEY_FILE=./gcp-key.json
GCS_BUCKET_NAME=accident-videos

# ===========================================
# Firebase (Push Notifications)
# ===========================================

FCM_SERVER_KEY=your-firebase-server-key
FIREBASE_DATABASE_URL=https://your-project.firebaseio.com

# ===========================================
# Service Ports
# ===========================================

API_GATEWAY_PORT=3000
USER_SERVICE_PORT=3001
ACCIDENT_SERVICE_PORT=3002
VIDEO_SERVICE_PORT=3003
AI_SERVICE_PORT=3004
NOTIFICATION_SERVICE_PORT=3005
MAP_SERVICE_PORT=3006
REPORT_SERVICE_PORT=3007
CAMERA_SERVICE_PORT=3008

# ===========================================
# Service URLs (for Docker/inter-service communication)
# ===========================================

USER_SERVICE_URL=http://user-service:3001
ACCIDENT_SERVICE_URL=http://accident-service:3002
VIDEO_SERVICE_URL=http://video-service:3003
AI_SERVICE_URL=http://ai-service:3004
NOTIFICATION_SERVICE_URL=http://notification-service:3005
MAP_SERVICE_URL=http://map-service:3006
REPORT_SERVICE_URL=http://report-service:3007
CAMERA_SERVICE_URL=http://camera-service:3008

# ===========================================
# Rate Limiting
# ===========================================

RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX=100
VIDEO_UPLOAD_LIMIT_WINDOW_MS=86400000
VIDEO_UPLOAD_LIMIT_MAX=10

# ===========================================
# File Upload
# ===========================================

MAX_FILE_SIZE=52428800
# 50MB in bytes (50 * 1024 * 1024)

# ===========================================
# Camera Settings
# ===========================================

CAMERA_STREAM_INTERVAL=300000
# 5 minutes in milliseconds

CAMERA_STREAM_DURATION=30
# 30 seconds

CAMERA_HEALTH_CHECK_INTERVAL=60000
# 1 minute

# ===========================================
# AI Configuration
# ===========================================

AI_CONFIDENCE_THRESHOLD=0.5
AI_MIN_ACCIDENT_FRAME_RATIO=0.3
AI_FRAME_INTERVAL=2
# Extract frame every 2 seconds

MODEL_PATH=/app/models/yolov8n.pt

# ===========================================
# Notification Settings
# ===========================================

DEFAULT_NOTIFICATION_RADIUS=5000
# 5km in meters

NOTIFICATION_BATCH_SIZE=100

# ===========================================
# CORS Configuration
# ===========================================

ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
# Comma-separated list, use * for all origins

# ===========================================
# Logging
# ===========================================

LOG_LEVEL=info
# error, warn, info, debug

LOG_FORMAT=json
# json, pretty

# ===========================================
# Cache TTL (seconds)
# ===========================================

CACHE_ACCIDENTS_LIST=300
CACHE_USER_PROFILE=900
CACHE_CAMERA_LIST=600
CACHE_NOTIFICATION_SETTINGS=1800

# ===========================================
# Pagination
# ===========================================

DEFAULT_PAGE_LIMIT=50
MAX_PAGE_LIMIT=100

# ===========================================
# Email Configuration (optional)
# ===========================================

SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=noreply@accident-app.mn

# ===========================================
# Monitoring (optional)
# ===========================================

SENTRY_DSN=
# Sentry.io error tracking

DATADOG_API_KEY=
# DataDog monitoring

# ===========================================
# Development/Testing
# ===========================================

DEBUG=false
MOCK_AI=false
# Use mock AI responses instead of real YOLOv8

SKIP_AUTH=false
# Skip JWT authentication (development only!)

# ===========================================
# Production Settings
# ===========================================

# When NODE_ENV=production, make sure to:
# 1. Change JWT_SECRET to a strong random value
# 2. Set proper ALLOWED_ORIGINS
# 3. Configure proper GCP credentials
# 4. Set strong DB_PASSWORD
# 5. Enable HTTPS
# 6. Configure proper logging
# 7. Set up monitoring (Sentry, DataDog, etc.)

# ===========================================
# Docker Specific (docker-compose.yml will override these)
# ===========================================

# DB_HOST=postgres
# REDIS_HOST=redis
# USER_SERVICE_URL=http://user-service:3001
# etc.