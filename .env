# ==========================================
# .env.example - Environment Variables Template
# ==========================================
# ⚠️  ЧУХАЛ: Энэ файлыг .env руу хуулаад өөрийн утгуудаа оруулна уу
# ⚠️  .env файлыг ХЭЗЭЭ Ч Git-д commit хийж болохгүй!
# ⚠️  Production дээр бүх credentials-ийг GCP Secret Manager эсвэл 
#     бусад secret management service ашиглах ёстой!

# ==========================================
# General Configuration
# ==========================================
NODE_ENV=production
LOG_LEVEL=info

# ==========================================
# Database Configuration (PostgreSQL)
# ==========================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=accident_db
DB_USER=postgres
# ⚠️  ЗААВАЛ СОЛИХ: Хүчтэй нууц үг ашиглах
DB_PASSWORD=CHANGE_THIS_STRONG_PASSWORD_123!@#
DB_MAX_CONNECTIONS=20
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=2000

# ==========================================
# Redis Configuration
# ==========================================
REDIS_HOST=localhost
REDIS_PORT=6379
# ⚠️  Production-д ЗААВАЛ нууц үг тохируулах
REDIS_PASSWORD=CHANGE_THIS_REDIS_PASSWORD
REDIS_DB=0

# ==========================================
# JWT Configuration
# ==========================================
# ⚠️  МАШ ЧУХАЛ: Санамсаргүй, хүчтэй secret key үүсгэх
# Үүсгэх: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=CHANGE_THIS_TO_RANDOM_STRING_AT_LEAST_64_CHARACTERS_LONG
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# ==========================================
# Google Cloud Platform
# ==========================================
# ⚠️  ЗААВАЛ СОЛИХ: Өөрийн GCP project ID
GCP_PROJECT_ID=ultra-sound-388300
GCP_KEY_FILE=./gcp-key.json
GCS_BUCKET_NAME="796432732044-asia-east1-blueprint-config"
GCP_REGION=asia-northeast1

# ==========================================
# Firebase (Push Notifications)
# ==========================================
FIREBASE_CREDENTIALS=/app/firebase.json
FIREBASE_DATABASE_URL=https://aiaccident-default-rtdb.asia-southeast1.firebasedatabase.app/

# ==========================================
# Google Maps API
# ==========================================
# ⚠️  ЗААВАЛ СОЛИХ: Өөрийн Google Maps API Key
# API Key үүсгэх: https://console.cloud.google.com/apis/credentials
GOOGLE_MAPS_API_KEY=AIzaSyAwJZ0luHRvQy9F7aIHYxpOXDP2KUFILHY

# ==========================================
# Service URLs (for inter-service communication)
# ==========================================
# Docker compose дотор автоматаар service name ашиглана
# Local development-д localhost ашиглана
USER_SERVICE_URL=http://localhost:3001
ACCIDENT_SERVICE_URL=http://localhost:3002
VIDEO_SERVICE_URL=http://localhost:3003
AI_SERVICE_URL=http://localhost:3004
NOTIFICATION_SERVICE_URL=http://localhost:3005
MAP_SERVICE_URL=http://localhost:3006
REPORT_SERVICE_URL=http://localhost:3007
CAMERA_SERVICE_URL=http://localhost:3008

# ==========================================
# API Gateway Configuration
# ==========================================
PORT=3000
# ⚠️  Production-д зөвхөн танай domain-ийг зөвшөөрөх
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,https://yourdomain.com

# ==========================================
# Rate Limiting
# ==========================================
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
VIDEO_UPLOAD_DAILY_LIMIT=10

# ==========================================
# File Upload Configuration
# ==========================================
MAX_FILE_SIZE=52428800
ALLOWED_VIDEO_TYPES=video/mp4,video/quicktime,video/x-msvideo
ALLOWED_IMAGE_TYPES=image/jpeg,image/png,image/webp

# ==========================================
# Camera Configuration
# ==========================================
CAMERA_STREAM_INTERVAL=300000
CAMERA_STREAM_DURATION=30
CAMERA_HEALTH_CHECK_INTERVAL=60000

# ==========================================
# AI Detection Configuration
# ==========================================
AI_CONFIDENCE_THRESHOLD=0.5
AI_MIN_ACCIDENT_FRAME_RATIO=0.3
AI_FRAME_INTERVAL=2
MODEL_PATH=/app/models/yolov8n.pt

# ==========================================
# Notification Configuration
# ==========================================
NOTIFICATION_DEFAULT_RADIUS=5000
NOTIFICATION_BATCH_SIZE=100

# ==========================================
# Cache TTL (seconds)
# ==========================================
CACHE_TTL_ACCIDENTS=300
CACHE_TTL_USER_PROFILE=900
CACHE_TTL_CAMERA_LIST=600
CACHE_TTL_NOTIFICATION_SETTINGS=1800

# ==========================================
# Production-specific settings
# ==========================================
# Production дээр эдгээрийг uncomment хийж, утгуудыг солих
# NODE_ENV=production
# DB_HOST=/cloudsql/PROJECT_ID:REGION:INSTANCE_NAME
# Use Cloud SQL Unix socket for better performance in GCP

# ==========================================
# ⚠️  АЮУЛГҮЙ БАЙДЛЫН ЗӨВЛӨМЖ
# ==========================================
# 1. Энэ файлыг .env руу хуулах
# 2. Бүх CHANGE_THIS гэсэн утгуудыг солих
# 3. .env файлыг .gitignore-д нэмэх
# 4. ХЭЗЭЭ Ч credentials-ийг Git-д commit хийхгүй байх
# 5. Production-д Secret Manager ашиглах (GCP Secret Manager, AWS Secrets Manager)
# 6. JWT_SECRET-ийг хамгийн багадаа 64 тэмдэгт болгох
# 7. Нууц үгнүүдийг хүчтэй болгох (том үсэг, жижиг үсэг, тоо, тэмдэгт)
# 8. Кодонд хардкод хийхгүй байх
# 9. API keys-үүдийг domain/IP restriction тавих
# 10. Тогтмол keys-үүдийг солих (90 өдөр тутам)

# ==========================================
# ХЭРХЭН JWT_SECRET ҮҮСГЭХ ВЭ
# ==========================================
# Node.js ашиглан:
# node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
#
# OpenSSL ашиглан:
# openssl rand -hex 64
#
# Python ашиглан:
# python -c "import secrets; print(secrets.token_hex(64))"

# ==========================================
# ХЭРХЭН GCP_KEY_FILE ҮҮСГЭХ ВЭ
# ==========================================
# 1. Google Cloud Console руу ороо
# 2. IAM & Admin > Service Accounts
# 3. CREATE SERVICE ACCOUNT
# 4. Шаардлагатай роль нэмэх:
#    - Storage Object Admin (GCS-д бичих/унших)
#    - Pub/Sub Publisher/Subscriber
# 5. Keys > ADD KEY > JSON
# 6. Татагдсан файлыг gcp-key.json гэж нэрлэх
# 7. Файлыг project root folder-д хийх

# ==========================================
# ХЭРХЭН FIREBASE_CREDENTIALS АВАХ ВЭ
# ==========================================
# 1. Firebase Console руу ороо
# 2. Project Settings > Service Accounts
# 3. Generate new private key
# 4. Татагдсан файлыг firebase.json гэж нэрлэх
# 5. FIREBASE_DATABASE_URL-ийг Project Settings-ээс авах
